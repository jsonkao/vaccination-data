geom_col() +
coord_flip() +
scale_y_continuous(
labels = scales::percent,
position = "right",
limits = c(0, 1),
expand = c(0, 0)
) +
theme(axis.title = element_blank()) +
labs(title = 'Percent of vaccination records with race known as of April 5, 2021 by state')
data %>%
filter(date == "2021-04-05") %>%
filter(category == "race_known") %>%
arrange(!is.na(value), value) %>%
mutate(state = factor(state, levels = state)) %>%
ggplot(aes(state, value)) +
geom_col() +
coord_flip() +
scale_y_continuous(
labels = scales::percent,
position = "right",
limits = c(0, 1),
expand = c(0, 0)
) +
theme(axis.title = element_blank(), plot.margin = unit(c(5.5, 5.5, 5.5, 5.5), "points")) +
labs(title = 'Percent of vaccination records with race known as of April 5, 2021 by state')
data %>%
filter(date == "2021-04-05") %>%
filter(category == "race_known") %>%
arrange(!is.na(value), value) %>%
mutate(state = factor(state, levels = state)) %>%
ggplot(aes(state, value)) +
geom_col() +
coord_flip() +
scale_y_continuous(
labels = scales::percent,
position = "right",
limits = c(0, 1),
expand = c(0, 0)
) +
theme(axis.title = element_blank(), plot.margin = unit(c(5.5, 8.5, 5.5, 5.5), "points")) +
labs(title = 'Percent of vaccination records with race known as of April 5, 2021 by state')
data %>%
filter(date == "2021-04-05") %>%
filter(category == "race_known") %>%
arrange(!is.na(value), value) %>%
mutate(state = factor(state, levels = state)) %>%
ggplot(aes(state, value)) +
geom_col() +
coord_flip() +
scale_y_continuous(
labels = scales::percent,
position = "right",
limits = c(0, 1),
expand = c(0, 0)
) +
theme(axis.title = element_blank(), plot.margin = unit(c(5.5, 80.5, 5.5, 5.5), "points")) +
labs(title = 'Percent of vaccination records with race known as of April 5, 2021 by state')
data %>%
filter(date == "2021-04-05") %>%
filter(category == "race_known") %>%
arrange(!is.na(value), value) %>%
mutate(state = factor(state, levels = state)) %>%
ggplot(aes(state, value)) +
geom_col() +
coord_flip() +
scale_y_continuous(
labels = scales::percent,
position = "right",
limits = c(0, 1),
expand = c(0, 0)
) +
theme(axis.title = element_blank(), plot.margin = unit(c(5.5, 17, 5.5, 5.5), "points")) +
labs(title = 'Percent of vaccination records with race known as of April 5, 2021 by state')
data %>%
filter(date == "2021-04-05") %>%
filter(category == "race_known") %>%
arrange(!is.na(value), value) %>%
mutate(state = factor(state, levels = state)) %>%
ggplot(aes(state, value)) +
geom_col() +
coord_flip() +
scale_y_continuous(
labels = scales::percent,
position = "right",
limits = c(0, 1),
expand = c(0, 0)
) +
theme(axis.title = element_blank(), plot.margin = unit(c(5.5, 10, 5.5, 5.5), "points")) +
labs(title = 'Percent of vaccination records with race known as of April 5, 2021 by state')
data %>%
filter(date == "2021-04-05") %>%
filter(category == "race_known") %>%
arrange(!is.na(value), value) %>%
mutate(state = factor(state, levels = state)) %>%
ggplot(aes(state, value)) +
geom_col() +
coord_flip() +
scale_y_continuous(
labels = scales::percent,
position = "right",
limits = c(0, 1),
expand = c(0, 0)
) +
theme(axis.title = element_blank(), plot.margin = unit(c(5.5, 15, 5.5, 5.5), "points")) +
labs(title = 'Percent of vaccination records with race known as of April 5, 2021 by state')
paste0('race','known')
gen_state_chart <- function(measure) {
data %>%
filter(date == "2021-04-05") %>%
filter(category == paste0(measure, "_known")) %>%
arrange(!is.na(value), value) %>%
mutate(state = factor(state, levels = state)) %>%
ggplot(aes(state, value)) +
geom_col() +
coord_flip() +
scale_y_continuous(
labels = scales::percent,
position = "right",
limits = c(0, 1),
expand = c(0, 0)
) +
theme(axis.title = element_blank(), plot.margin = unit(c(5.5, 15, 5.5, 5.5), "points")) +
labs(title = paste('Percent of vaccination records with', measure, 'known as of April 5, 2021 by state'))
}
gen_state_chart('race')
gen_state_chart('ethnicity')
library(cowplot)
?plot_grid
plot_grid(gen_state_chart('race'), gen_state_chart('ethnicity'))
data %>%
filter(date == "2021-04-05") %>%
filter(category == paste0(measure, "_known")) %>%
arrange(!is.na(value), value) %>%
mutate(state = factor(state, levels = state)) %>%
ggplot(aes(state, value)) +
geom_col() +
coord_flip() +
scale_y_continuous(
labels = scales::percent,
position = "right",
limits = c(0, 1),
expand = c(0, 0)
) +
theme(axis.title = element_blank(), plot.margin = unit(c(5.5, 15, 5.5, 5.5), "points")) +
labs(title = paste0('Percent of vaccination records with ', measure, '\nknown as of April 5, 2021 by state'))
gen_state_chart <- function(measure) {
data %>%
filter(date == "2021-04-05") %>%
filter(category == paste0(measure, "_known")) %>%
arrange(!is.na(value), value) %>%
mutate(state = factor(state, levels = state)) %>%
ggplot(aes(state, value)) +
geom_col() +
coord_flip() +
scale_y_continuous(
labels = scales::percent,
position = "right",
limits = c(0, 1),
expand = c(0, 0)
) +
theme(axis.title = element_blank(), plot.margin = unit(c(5.5, 15, 5.5, 5.5), "points")) +
labs(title = paste0('Percent of vaccination records with ', measure, '\nknown as of April 5, 2021 by state'))
}
plot_grid(gen_state_chart('race'), gen_state_chart('ethnicity'))
gen_state_chart <- function(measure) {
data %>%
filter(date == "2021-04-05") %>%
filter(category == paste0(measure, "_known")) %>%
arrange(!is.na(value), value) %>%
mutate(state = factor(state, levels = state)) %>%
ggplot(aes(state, value)) +
geom_col() +
coord_flip() +
scale_y_continuous(
labels = scales::percent,
position = "right",
limits = c(0, 1),
expand = c(0, 0)
) +
theme(axis.title = element_blank(), plot.margin = unit(c(5.5, if_else(measure == "ethnicity", 15, 5.5), 5.5, 5.5), "points")) +
labs(title = paste0('Percent of vaccination records with ', measure, '\nknown as of April 5, 2021 by state'))
}
plot_grid(gen_state_chart('race'), gen_state_chart('ethnicity'))
data %>%
filter(date == "2021-04-05") %>%
filter(category == paste0(measure, "_known")) %>%
arrange(!is.na(value), value) %>%
mutate(state = factor(state, levels = state)) %>%
ggplot(aes(state, value)) +
geom_col() +
coord_flip() +
scale_y_continuous(
labels = scales::percent,
position = "right",
limits = c(0, 1),
expand = c(0, 0)
) +
theme(axis.title = element_blank(), plot.margin = unit(c(5.5, if_else(measure == "ethnicity", 15, 10), 5.5, 5.5), "points")) +
labs(title = paste0('Percent of vaccination records with ', measure, '\nknown as of April 5, 2021 by state'))
gen_state_chart <- function(measure) {
data %>%
filter(date == "2021-04-05") %>%
filter(category == paste0(measure, "_known")) %>%
arrange(!is.na(value), value) %>%
mutate(state = factor(state, levels = state)) %>%
ggplot(aes(state, value)) +
geom_col() +
coord_flip() +
scale_y_continuous(
labels = scales::percent,
position = "right",
limits = c(0, 1),
expand = c(0, 0)
) +
theme(axis.title = element_blank(), plot.margin = unit(c(5.5, if_else(measure == "ethnicity", 15, 10), 5.5, 5.5), "points")) +
labs(title = paste0('Percent of vaccination records with ', measure, '\nknown as of April 5, 2021 by state'))
}
plot_grid(gen_state_chart('race'), gen_state_chart('ethnicity'))
gen_state_chart <- function(measure) {
data %>%
filter(date == "2021-04-05") %>%
filter(category == paste0(measure, "_known")) %>%
arrange(!is.na(value), value) %>%
mutate(state = factor(state, levels = state)) %>%
ggplot(aes(state, value)) +
geom_col() +
coord_flip() +
scale_y_continuous(
labels = scales::percent,
position = "right",
limits = c(0, 1),
expand = c(0, 0)
) +
theme(axis.title = element_blank(), plot.margin = unit(c(5.5, 15, 5.5, 5.5), "points")) +
labs(title = paste0('Percent of vaccination records with ', measure, '\nknown as of April 5, 2021 by state'))
}
ggsave(
"../figures/state_measures.png",
plot_grid(gen_state_chart('race'), gen_state_chart('ethnicity')),
width = "6.5in",
height = "7in"
)
ggsave(
"../figures/state_measures.png",
plot_grid(gen_state_chart('race'), gen_state_chart('ethnicity')),
width = 6.5
height = 7,
units = "in"
)
ggsave(
"../figures/state_measures.png",
plot_grid(gen_state_chart('race'), gen_state_chart('ethnicity')),
width = 6.5,
height = 7,
units = "in"
)
ggsave(
"../figures/state_measures.png",
plot_grid(gen_state_chart('race'), gen_state_chart('ethnicity')),
width = 13,
height = 10,
units = "in"
)
ggsave(
"../figures/state_measures.png",
plot_grid(gen_state_chart('race'), gen_state_chart('ethnicity')),
width = 8,
height = 9,
units = "in"
)
gen_state_chart <- function(measure) {
data %>%
filter(date == "2021-04-05") %>%
filter(category == paste0(measure, "_known")) %>%
arrange(!is.na(value), value) %>%
mutate(state = factor(state, levels = state)) %>%
ggplot(aes(state, value)) +
geom_col() +
coord_flip() +
scale_y_continuous(
labels = scales::percent,
position = "right",
limits = c(0, 1),
expand = c(0, 0)
) +
theme(axis.title = element_blank(), plot.margin = unit(c(5.5, 15, 5.5, 5.5), "points")) +
labs(subtitle = paste0('Percent of vaccination records\nwith ', measure, ' known as of\nApril 5, 2021 by state'))
}
ggsave(
"../figures/state_measures.png",
plot_grid(gen_state_chart('race'), gen_state_chart('ethnicity')),
width = 8,
height = 9,
units = "in"
)
?theme
gen_state_chart <- function(measure) {
data %>%
filter(date == "2021-04-05") %>%
filter(category == paste0(measure, "_known")) %>%
arrange(!is.na(value), value) %>%
mutate(state = factor(state, levels = state)) %>%
ggplot(aes(state, value)) +
geom_col() +
coord_flip() +
scale_y_continuous(
labels = scales::percent,
position = "right",
limits = c(0, 1),
expand = c(0, 0)
) +
theme(axis.title = element_blank(), plot.margin = unit(c(5.5, 15, 5.5, 0), "points")) +
labs(subtitle = paste0('Percent of vaccination records\nwith ', measure, ' known as of\nApril 5, 2021 by state'))
}
gen_state_chart('race')
gen_state_chart <- function(measure) {
data %>%
filter(date == "2021-04-05") %>%
filter(category == paste0(measure, "_known")) %>%
arrange(!is.na(value), value) %>%
mutate(state = factor(state, levels = state)) %>%
ggplot(aes(state, value)) +
geom_col() +
coord_flip() +
scale_y_continuous(
labels = scales::percent,
position = "right",
limits = c(0, 1),
expand = c(0, 0)
) +
theme(axis.title = element_blank(), plot.margin = unit(c(5.5, 15, 5.5, 0), "points"), axis.text.x = element_text(size = 16)) +
labs(subtitle = paste0('Percent of vaccination records\nwith ', measure, ' known as of\nApril 5, 2021 by state'))
}
gen_state_chart('race')
gen_state_chart <- function(measure) {
data %>%
filter(date == "2021-04-05") %>%
filter(category == paste0(measure, "_known")) %>%
arrange(!is.na(value), value) %>%
mutate(state = factor(state, levels = state)) %>%
ggplot(aes(state, value)) +
geom_col() +
coord_flip() +
scale_y_continuous(
labels = scales::percent,
position = "right",
limits = c(0, 1),
expand = c(0, 0)
) +
theme(axis.title = element_blank(), plot.margin = unit(c(5.5, 15, 5.5, 0), "points"), axis.text.y = element_text(size = 12)) +
labs(subtitle = paste0('Percent of vaccination records\nwith ', measure, ' known as of\nApril 5, 2021 by state'))
}
gen_state_chart('race')
gen_state_chart <- function(measure) {
data %>%
filter(date == "2021-04-05") %>%
filter(category == paste0(measure, "_known")) %>%
arrange(!is.na(value), value) %>%
mutate(state = factor(state, levels = state)) %>%
ggplot(aes(state, value)) +
geom_col() +
coord_flip() +
scale_y_continuous(
labels = scales::percent,
position = "right",
limits = c(0, 1),
expand = c(0, 0)
) +
theme(axis.title = element_blank(), plot.margin = unit(c(5.5, 15, 5.5, 0), "points"), axis.text = element_text(size = 9)) +
labs(subtitle = paste0('Percent of vaccination records\nwith ', measure, ' known as of\nApril 5, 2021 by state'))
}
gen_state_chart('race')
gen_state_chart <- function(measure) {
data %>%
filter(date == "2021-04-05") %>%
filter(category == paste0(measure, "_known")) %>%
arrange(!is.na(value), value) %>%
mutate(state = factor(state, levels = state)) %>%
ggplot(aes(state, value)) +
geom_col() +
coord_flip() +
scale_y_continuous(
labels = scales::percent,
position = "right",
limits = c(0, 1),
expand = c(0, 0)
) +
theme(axis.title = element_blank(), plot.margin = unit(c(5.5, 15, 5.5, 0), "points"), axis.text = element_text(size = 10)) +
labs(subtitle = paste0('Percent of vaccination records\nwith ', measure, ' known as of\nApril 5, 2021 by state'))
}
gen_state_chart('race')
ggsave(
"../figures/state_measures.png",
plot_grid(gen_state_chart('race'), gen_state_chart('ethnicity')),
width = 8,
height = 9,
units = "in"
)
gen_state_chart <- function(measure) {
data %>%
filter(date == "2021-04-05") %>%
filter(category == paste0(measure, "_known")) %>%
arrange(!is.na(value), value) %>%
mutate(state = factor(state, levels = state)) %>%
ggplot(aes(state, value)) +
geom_col() +
coord_flip() +
scale_y_continuous(
labels = scales::percent,
position = "right",
limits = c(0, 1),
expand = c(0, 0)
) +
theme(axis.title = element_blank(), plot.margin = unit(c(5.5, 15, 5.5, 0), "points"), axis.text = element_text(size = 10), axis.subtitle = element_text(size = 11.5)) +
labs(subtitle = paste0('Percent of vaccination records\nwith ', measure, ' known as of\nApril 5, 2021 by state'))
}
gen_state_chart('race')
gen_state_chart <- function(measure) {
data %>%
filter(date == "2021-04-05") %>%
filter(category == paste0(measure, "_known")) %>%
arrange(!is.na(value), value) %>%
mutate(state = factor(state, levels = state)) %>%
ggplot(aes(state, value)) +
geom_col() +
coord_flip() +
scale_y_continuous(
labels = scales::percent,
position = "right",
limits = c(0, 1),
expand = c(0, 0)
) +
theme(axis.title = element_blank(), plot.margin = unit(c(5.5, 15, 5.5, 0), "points"), axis.text = element_text(size = 10), plot.subtitle = element_text(size = 11.5)) +
labs(subtitle = paste0('Percent of vaccination records\nwith ', measure, ' known as of\nApril 5, 2021 by state'))
}
gen_state_chart('race')
ggsave(
"../figures/state_measures.png",
plot_grid(gen_state_chart('race'), gen_state_chart('ethnicity')),
width = 8,
height = 9,
units = "in"
)
gen_state_chart <- function(measure) {
data %>%
filter(date == "2021-04-05") %>%
filter(category == paste0(measure, "_known")) %>%
arrange(!is.na(value), value) %>%
mutate(state = factor(state, levels = state)) %>%
ggplot(aes(state, value)) +
geom_col() +
coord_flip() +
scale_y_continuous(
labels = scales::percent,
position = "right",
limits = c(0, 1),
expand = c(0, 0)
) +
theme(axis.title = element_blank(), plot.margin = unit(c(5.5, 15, 5.5, 0), "points"), axis.text = element_text(size = 10), plot.subtitle = element_text(size = 13)) +
labs(subtitle = paste0('Percent of vaccination records\nwith ', measure, ' known as of\nApril 5, 2021 by state'))
}
ggsave(
"../figures/state_measures.png",
plot_grid(gen_state_chart('race'), gen_state_chart('ethnicity')),
width = 8,
height = 9,
units = "in"
)
gen_state_chart <- function(measure) {
data %>%
filter(date == "2021-04-05") %>%
filter(category == paste0(measure, "_known")) %>%
arrange(!is.na(value), value) %>%
mutate(state = factor(state, levels = state)) %>%
ggplot(aes(state, value)) +
geom_col() +
coord_flip() +
scale_y_continuous(
labels = scales::percent,
position = "right",
limits = c(0, 1),
expand = c(0, 0)
) +
theme(axis.title = element_blank(), plot.margin = unit(c(5.5, 15, 5.5, 0), "points"), axis.text = element_text(size = 10), plot.subtitle = element_text(size = 12)) +
labs(subtitle = paste0('Percent of vaccination records\nwith ', measure, ' known as of\nApril 5, 2021 by state'))
}
ggsave(
"../figures/state_measures.png",
plot_grid(gen_state_chart('race'), gen_state_chart('ethnicity')),
width = 8,
height = 9,
units = "in"
)
bbgData
bbgData %>%
filter(is.na(value))
library(tidyverse)
bbgData %>%
filter(is.na(value)) %>%
count(category)
data %>% pull(state)
data %>% pull(state) %>% unique()
bbgData %>%
filter(!is.na(value)) %>%
pull(state) %>%
unique()
bbgData %>%
filter(!is.na(value)) %>%
pull(state) %>%
unique() %>%
length()
